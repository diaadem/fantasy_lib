{% extends "layout.html" %}

{% block body %}
<div class="container mt-4">
    <h2 style="font-family: 'Trebuchet MS'; color: #333; font-weight: bold;">Edit Book</h2>

    <hr>
    <div class="large-card" style="padding: 50px; ">
        <form id="editItemForm" action="/edit/{{ item.id }}" method="post">
                <div class="form-group" style="font-family: 'Trebuchet MS'">
                    <label for="title">Title:</label>
                    <input type="text" class="form-control" id="title" name="title" value="{{ item.title }}" required>
                    <div class="invalid-feedback">Please enter a title.</div>
                </div>

                <div class="form-group" style="font-family: 'Trebuchet MS'">
                    <label for="author">Author:</label>
                    <input type="text" class="form-control" id="author" name="author" value="{{ item.author }}" required>
                    <div class="invalid-feedback">Please enter an author name.</div>
                </div>

                <div class="form-group" style="font-family: 'Trebuchet MS'">
                    <label for="rating">Rating:</label>
                    <input type="number" class="form-control" id="rating" name="rating" min="0" max="5" step="0.01" value="{{ item.rating }}" required pattern="^[0-5](\.\d{1,2})?$">
                    <div class="invalid-feedback">Rating must be between 0 and 5 with up to two decimal places.</div>
                </div>

                <div class="form-group" style="font-family: 'Trebuchet MS'">
                    <label for="publisher">Publisher:</label>
                    <input type="text" class="form-control" id="publisher" name="publisher" value="{{ item.publisher }}" required>
                    <div class="invalid-feedback">Please enter a publisher name.</div>
                </div>

                <div class="form-group" style="font-family: 'Trebuchet MS'">
                    <label for="publishedDate">Published Date:</label>
                    <input type="date" class="form-control" id="publishedDate" name="published_date" value="{{ item['published date'] }}" max="{{ max_date }}" required>
                    <div class="invalid-feedback">Please select a valid publication date.</div>
                </div>

                <div class="form-group" style="font-family: 'Trebuchet MS'">
                    <label for="imageUrl">Image URL:</label>
                    <input type="url" class="form-control" id="imageUrl" name="image_url" value="{{ item.image }}" required>
                    <div class="invalid-feedback">Please enter a valid image URL.</div>
                </div>

                <div class="form-group" style="font-family: 'Trebuchet MS'">
                    <label for="summary">Summary:</label>
                    <textarea class="form-control" id="summary" name="summary" rows="4" required>{{ item.summary }}</textarea>
                    <div class="invalid-feedback">Please enter a summary.</div>
                </div>

                <div class="form-group" style="font-family: 'Trebuchet MS'">
                    <label for="genre">Genre:</label>
                    <input type="text" class="form-control" id="genre" name="genre" value="{{ item.genre|join(', ') }}" required>
                    <small class="form-text text-muted">Enter genres separated by commas (e.g., genre1, genre2).</small>
                    <div class="invalid-feedback">Please enter at least one genre.</div>
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
            <a href="#" id="discardChangesLink" class="btn btn-secondary" data-item-id="{{ item.id }}">Discard Changes</a>
        </form>
    </div>
    <div id="successMessage" class="alert alert-success mt-4" style="display: none;"></div>
</div>

{% endblock %}

{% block scripts %}

{% endblock %}